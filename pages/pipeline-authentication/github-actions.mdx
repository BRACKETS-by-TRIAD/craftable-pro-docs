# Github Actions

In order to user Craftable Pro in Github Actions we must authorize composer to access private repository

To authorize composer in Github Actions we will add new Secret and extend our `action.yml` with `COMPOSER_AUTH` enviroment variable. 

## ‚öôÔ∏è Add a new key in Respository Settings
In Github under Respository Settings navigate to `Secrets` and add a new variable
```sh
key:    CRAFTABLE_PRO_LICENCE_KEY
value:  <your-licence-key>
```

## üìù Add `COMPOSER_AUTH` in your Action `action.yml`
Under `env` of your `.yml` composer build step, add following line
```sh
COMPOSER_AUTH: '{"http-basic":{"packages.craftable.pro":{"username":"whatever@email.com","password":"'$CRAFTABLE_PRO_LICENCE_KEY'"}}}' composer install --no-interaction --prefer-dist
```
You can use any user name you like, that is why predefined username is `whatever@email.com` 

Example of a build step
```sh {9}
jobs:
  build:
    ...
    - name: Install dependencies
      uses: php-actions/composer@v6
      env:
        COMPOSER_AUTH: {"http-basic":{"packages.craftable.pro":{"username":"whatever@email.com","password":"'$CRAFTABLE_PRO_LICENCE_KEY'"}}}'
```
